{
  "type":"index",
  "spec":{
    "dataSchema":{
      "dataSource":"telemetry",
      "parser":{
        "type":"string",
        "parser":{
        "type":"string",
        "parseSpec":{
          "format":"json",
          "flattenSpec": {
            "useFieldDiscovery": false,
            "fields": [
              {
                "type":"root",
                "name":"eid"
              },
              {
                "type":"root",
                "name":"syncts"
              },
              {
                "type":"root",
                "name":"@timestamp"
              },
              {
                "type":"path",
                "name":"userId",
                "expr":"$.actor.id"
              },
              {
                "type":"path",
                "name":"userType",
                "expr":"$.actor.type"
              },
              {
                "type":"path",
                "name":"channel",
                "expr":"$.context.channel"
              },
              {
                "type":"path",
                "name":"producerId",
                "expr":"$.context.pdata.id"
              },
              {
                "type":"path",
                "name":"producerPid",
                "expr":"$.context.pdata.pid"
              },
              {
                "type":"path",
                "name":"sid",
                "expr":"$.context.sid"
              },
              {
                "type":"path",
                "name":"deviceId",
                "expr":"$.context.did"
              },
              {
                "type":"path",
                "name":"objectId",
                "expr":"$.context.object.id"
              },
              {
                "type":"path",
                "name":"objectType",
                "expr":"$.context.object.type"
              },
              {
                "type":"path",
                "name":"objectVer",
                "expr":"$.context.object.ver"
              },
              {
                "type":"path",
                "name":"edataType",
                "expr":"$.edata.type"
              },
              {
                "type":"path",
                "name":"edataSubtype",
                "expr":"$.edata.subtype"
              },
              {
                "type":"path",
                "name":"edataId",
                "expr":"$.edata.id"
              },
              {
                "type":"path",
                "name":"edataDuration",
                "expr":"$.edata.duration"
              },
              {
                "type":"path",
                "name":"dialcodes",
                "expr":"$.edata.filters.dialcodes"
              }
            ]
          },
          "dimensionsSpec":{
            "dimensions": [],
            "dimensionsExclusions": []
          },
          "timestampSpec":{
            "column":"ets",
            "format":"auto"
          }
        }
      },
      "metricsSpec":[],
      "granularitySpec":{
        "type":"uniform", 
        "segmentGranularity":"day",
        "queryGranularity":"none",
        "rollup": false
      }
    },
    "ioConfig":{
      "type":"index",
      "firehose":{
        "type":"local",
        "baseDir":"/data/",
        "filter":"2018-11-13-1542183972215.json.gz"
      },
      "appendToExisting":false
    },
    "tuningConfig":{
      "type":"index",
      "targetPartitionSize":5000000,
      "maxRowsInMemory":25000,
      "forceExtendableShardSpecs":true
    }
  }
}